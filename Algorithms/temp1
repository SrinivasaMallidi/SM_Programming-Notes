class ApplicationPaths(models.Model):
    name = models.CharField(max_length=100)
    path = models.CharField(max_length=255)
    url = models.URLField(blank=True)

    def __str__(self):
        return self.name



@admin.register(ApplicationPaths)
class ApplicationPathsAdmin(admin.ModelAdmin):
    list_display = ('name',)
    list_display_links = ('name',)



    applications = ApplicationPaths.objects.all()
    context = {'applications': applications}



def open_application(request, application_name):
        print("trying to open"+application_name)
        try:
            application = ApplicationPaths.objects.get(name=application_name)
            print(application.path)
            subprocess.Popen([application.path])
            return  redirect('common-home')
        except ApplicationPaths.DoesNotExist:
            # Handle the case where the application name is not found
            print("Application not found")
            return  redirect('common-home')


{% extends "common/base.html" %}
{% block content %}
{% load static %}   

<div class="col_3">
    {% for app in applications %}
    <div class="col-md-3 widget widget1">
        <div class="r3_counter_box">
            <i class="pull-left fa fa-check icon-rounded"></i>
            <div class="stats">                
              <h5><strong>{{ app.name }}</strong></h5>
              {% if app.url %}
                  <a href="{{ app.url }}" class="btn btn_5 btn-lg btn-link" target="_blank">Click here</a>
              {% else %}
                  <button class="btn btn_5 btn-lg btn-link" onclick="location.href='{% url 'open_application' app.name  %}'">Click here</button>
              {% endif %}
            </div>
        </div>
    </div>
    {% endfor %}
</div>

     	        
{% endblock content %}

