from django.shortcuts import render
from .models import Server, DBDetails

# Create your views here.

def home(request):
    context = {}
    return render(request, 'common/home.html',context)

def viewGWMS(request):
    # Retrieve all Server instances
    servers = Server.objects.all()
    for i in servers:
        print(i.tag)

    #  Get unique tags and sort them in ascending order
    tags = sorted(set(server.tag for server in servers))

    # Query DBDetails based on the tag
    db_details = DBDetails.objects.filter(tag__in=tags)

    context = {
        'servers': servers, 
        'db_details': db_details,
        'tags': tags
        }

    return render(request, 'common/gwms.html',context)
